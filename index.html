<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TranspoCompare</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: url('https://images.unsplash.com/photo-1717343824623-06293a62a70d?q=80&w=1842&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') no-repeat center center fixed; 
            background-size: cover; 
            margin: 0; 
            padding: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
        }
        .container { 
            background-color: rgba(255, 255, 255, 0.9); 
            padding: 20px; 
            border-radius: 16px; 
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); 
            width: 100%; 
            max-width: 360px; 
            text-align: center; 
        }
        .logo { 
            width: 100px; 
            margin-bottom: 20px; 
        }
        h1 { 
            font-size: 28px; 
            margin-bottom: 20px; 
            color: #333; 
        }
        .tags-container { 
            display: flex; 
            justify-content: space-around; 
            margin-bottom: 15px; 
        }
        .tag { 
            padding: 10px; 
            border-radius: 8px; 
            color: white; 
            cursor: pointer; 
            font-size: 14px; 
            transition: border 0.3s; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            min-width: 70px;
        }
        .tag.uber { background-color: #000000; }
        .tag.ninety_nine { background-color: #FFD300; color: #333; }
        .tag.cabify { background-color: #7B1FA2; }
        .tag.indrive { background-color: #53A746; }
        .tag.selected { border: 3px solid #00ff00; }
        .input-container { 
            display: flex; 
            align-items: center; 
            margin-bottom: 15px; 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            background-color: #f9f9f9; 
            padding: 10px; 
        }
        .input-container i { 
            color: #333; 
            margin-right: 10px; 
        }
        input { 
            width: calc(100% - 40px); 
            padding: 10px; 
            border: none; 
            border-radius: 8px; 
            font-size: 16px; 
            color: #333; 
        }
        .discreet-btn, button { 
            width: 100%; 
            padding: 10px; 
            background-color: #007bff; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            font-size: 16px; 
            cursor: pointer; 
            margin-bottom: 10px; 
        }
        .discreet-btn:hover, button:hover { 
            background-color: #0056b3; 
        }
        .results { 
            display: flex; 
            flex-direction: column; 
            gap: 10px; 
        }
        .result-box { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            padding: 15px; 
            border-radius: 12px; 
            color: white; 
            text-decoration: none; 
            font-size: 16px; 
            text-align: center; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); 
            transition: transform 0.3s, background-color 0.3s; 
        }
        .result-box:hover { 
            transform: scale(1.05); 
        }
        .result-box .name { 
            font-size: 18px; 
            font-weight: bold; 
            margin-bottom: 8px; 
        }
        .result-box .price { 
            font-size: 16px; 
        }
        .uber { background-color: #000000; }
        .ninety_nine { background-color: #FFD300; color: #333; }
        .cabify { background-color: #7B1FA2; }
        .indrive { background-color: #53A746; }
        .savings { 
            margin-top: 20px; 
            font-size: 18px; 
            font-weight: bold; 
            color: #333; 
        }
        #loading { 
            display: none; 
            font-size: 16px; 
            color: #333; 
            margin-top: 20px; 
        }
        .icon { 
            font-size: 24px; 
        }
        #clear { 
            display: none; 
        }
    </style>
    <link rel="shortcut icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2tGIdIdv1pFFjlhQZMloE6eChvfKnOcg4iA&s" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2tGIdIdv1pFFjlhQZMloE6eChvfKnOcg4iA&s" alt="TranspoCompare Logo" class="logo">
        <h1>TranspoCompare</h1>
        <div class="tags-container">
            <div class="tag uber selected" onclick="toggleTag(this, 'uber')">Uber</div>
            <div class="tag ninety_nine selected" onclick="toggleTag(this, 'ninety_nine')">99</div>
            <div class="tag cabify" onclick="toggleTag(this, 'cabify')">Cabify</div>
            <div class="tag indrive" onclick="toggleTag(this, 'indrive')">InDrive</div>
        </div>
        <div class="input-container">
            <i class="fas fa-map-marker-alt icon"></i>
            <input type="text" id="start" placeholder="Endereço de Partida">
        </div>
        <button class="discreet-btn" onclick="getLocation()">Usar Minha Localização</button>
        <div class="input-container">
            <i class="fas fa-location-arrow icon"></i>
            <input type="text" id="destination" placeholder="Endereço de Destino">
        </div>
        <button onclick="getQuote()">Obter Cotação</button>
        <button id="clear" class="discreet-btn" onclick="clearFields()">Limpar Pesquisa</button>
        <div id="loading">Buscando preço...</div>
        <div class="results" id="results"></div>
        <div class="savings" id="savings"></div>
    </div>
    <script>
        let selectedApps = ['uber', 'ninety_nine'];

        function toggleTag(element, app) {
            element.classList.toggle('selected');
            const index = selectedApps.indexOf(app);
            if (index > -1) {
                selectedApps.splice(index, 1);
            } else {
                selectedApps.push(app);
            }
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                alert("Geolocalização não é suportada por este navegador.");
            }
        }

        function showPosition(position) {
            const lat = position.coords.latitude, lon = position.coords.longitude;
            fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`)
                .then(response => response.json())
                .then(data => {
                    const address = data.address;
                    const street = address.road || '';
                    const houseNumber = address.house_number || '';
                    document.getElementById('start').value = `${street} ${houseNumber}`;
                })
                .catch(error => {
                    console.error("Erro ao obter o endereço:", error);
                    alert("Erro ao obter o endereço da sua localização.");
                });
        }

        function showError(error) {
            switch (error.code) {
                case error.PERMISSION_DENIED: alert("Usuário negou a solicitação de geolocalização."); break;
                case error.POSITION_UNAVAILABLE: alert("Informações de localização estão indisponíveis."); break;
                case error.TIMEOUT: alert("A solicitação de localização expirou."); break;
                case error.UNKNOWN_ERROR: alert("Ocorreu um erro desconhecido."); break;
            }
        }

        function getQuote() {
            const start = document.getElementById('start').value;
            const destination = document.getElementById('destination').value;
            if (!start || !destination) {
                alert('Por favor, insira os endereços de partida e destino.');
                return;
            }

            document.getElementById('loading').style.display = 'block';

            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('clear').style.display = 'block';

                const results = [
                    { app: 'uber', price: 'R$ 20,00' },
                    { app: 'ninety_nine', price: 'R$ 18,00' },
                    { app: 'cabify', price: 'R$ 22,00' },
                    { app: 'indrive', price: 'R$ 19,00' },
                ];

                let selectedResults = results.filter(result => selectedApps.includes(result.app));
                selectedResults = selectedResults.sort((a, b) => parseFloat(a.price.replace('R$', '')) - parseFloat(b.price.replace('R$', '')));

                document.getElementById('results').innerHTML = selectedResults.map(result => `
                    <a href="#" class="result-box ${result.app}">
                        <div class="name">${capitalizeFirstLetter(result.app)}</div>
                        <div class="price">${result.price}</div>
                    </a>
                `).join('');

                if (selectedResults.length > 1) {
                    const savings = parseFloat(selectedResults[1].price.replace('R$', '')) - parseFloat(selectedResults[0].price.replace('R$', ''));
                    document.getElementById('savings').textContent = `Você economiza R$ ${savings.toFixed(2)} escolhendo ${capitalizeFirstLetter(selectedResults[0].app)}!`;
                }
            }, 1000);
        }

        function clearFields() {
            document.getElementById('start').value = '';
            document.getElementById('destination').value = '';
            document.getElementById('results').innerHTML = '';
            document.getElementById('savings').textContent = '';
            document.getElementById('clear').style.display = 'none';
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        
        function capitalizeFirstLetter(string) {
    if (string === 'ninety_nine') return '99';
    return string.charAt(0).toUpperCase() + string.slice(1);
}

    </script>
</body>
</html>
